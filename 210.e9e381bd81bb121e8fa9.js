(globalThis.webpackChunk_oniijs_onii=globalThis.webpackChunk_oniijs_onii||[]).push([[210],{6241:(t,i,e)=>{"use strict";e.r(i),e.d(i,{BubbleTooltip:()=>a,default:()=>c});var l=e(7396),s=e.n(l),o=e(5458),n=e(7429),h=e(6945),r=e(6932);const u=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class a extends n.BaseTooltip{constructor(t,i){super(t,i),this.quill.on(o.Z.events.EDITOR_CHANGE,((t,i,e,l)=>{if(t===o.Z.events.SELECTION_CHANGE)if(null!=i&&i.length>0&&l===o.Z.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(i.index,i.length);if(1===t.length)this.position(this.quill.getBounds(i));else{const e=t[t.length-1],l=this.quill.getIndex(e),s=Math.min(e.length()-1,i.index+i.length-l),o=this.quill.getBounds(new h.e(l,s));this.position(o)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(o.Z.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();null!=t&&this.position(this.quill.getBounds(t))}),1)}))}cancel(){this.show()}position(t){const i=super.position(t),e=this.root.querySelector(".ql-tooltip-arrow");return e.style.marginLeft="",0!==i&&(e.style.marginLeft=-1*i-e.offsetWidth/2+"px"),i}}a.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");class c extends n.default{constructor(t,i){null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=u),super(t,i),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new a(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),r.Z),this.buildPickers(t.container.querySelectorAll("select"),r.Z)}}c.DEFAULTS=s()(!0,{},n.default.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}})},1129:()=>{}}]);