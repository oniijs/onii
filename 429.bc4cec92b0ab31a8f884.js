"use strict";(globalThis.webpackChunk_oniijs_onii=globalThis.webpackChunk_oniijs_onii||[]).push([[429],{1312:t=>{var e=Object.prototype.hasOwnProperty,s="~";function i(){}function o(t,e,s){this.fn=t,this.context=e,this.once=s||!1}function n(t,e,i,n,l){if("function"!=typeof i)throw new TypeError("The listener must be a function");var r=new o(i,n||t,l),c=s?s+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],r]:t._events[c].push(r):(t._events[c]=r,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function r(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),r.prototype.eventNames=function(){var t,i,o=[];if(0===this._eventsCount)return o;for(i in t=this._events)e.call(t,i)&&o.push(s?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},r.prototype.listeners=function(t){var e=s?s+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,n=i.length,l=new Array(n);o<n;o++)l[o]=i[o].fn;return l},r.prototype.listenerCount=function(t){var e=s?s+t:t,i=this._events[e];return i?i.fn?1:i.length:0},r.prototype.emit=function(t,e,i,o,n,l){var r=s?s+t:t;if(!this._events[r])return!1;var c,a,u=this._events[r],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,o),!0;case 5:return u.fn.call(u.context,e,i,o,n),!0;case 6:return u.fn.call(u.context,e,i,o,n,l),!0}for(a=1,c=new Array(h-1);a<h;a++)c[a-1]=arguments[a];u.fn.apply(u.context,c)}else{var d,p=u.length;for(a=0;a<p;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,void 0,!0),h){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,i);break;case 4:u[a].fn.call(u[a].context,e,i,o);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[a].fn.apply(u[a].context,c)}}return!0},r.prototype.on=function(t,e,s){return n(this,t,e,s,!1)},r.prototype.once=function(t,e,s){return n(this,t,e,s,!0)},r.prototype.removeListener=function(t,e,i,o){var n=s?s+t:t;if(!this._events[n])return this;if(!e)return l(this,n),this;var r=this._events[n];if(r.fn)r.fn!==e||o&&!r.once||i&&r.context!==i||l(this,n);else{for(var c=0,a=[],u=r.length;c<u;c++)(r[c].fn!==e||o&&!r[c].once||i&&r[c].context!==i)&&a.push(r[c]);a.length?this._events[n]=1===a.length?a[0]:a:l(this,n)}return this},r.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=s,r.EventEmitter=r,t.exports=r},7396:t=>{var e=Object.prototype.hasOwnProperty,s=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===s.call(t)},l=function(t){if(!t||"[object Object]"!==s.call(t))return!1;var i,o=e.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&e.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!n)return!1;for(i in t);return void 0===i||e.call(t,i)},r=function(t,e){i&&"__proto__"===e.name?i(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,s){if("__proto__"===s){if(!e.call(t,s))return;if(o)return o(t,s).value}return t[s]};t.exports=function t(){var e,s,i,o,a,u,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<p;++d)if(null!=(e=arguments[d]))for(s in e)i=c(h,s),h!==(o=c(e,s))&&(f&&o&&(l(o)||(a=n(o)))?(a?(a=!1,u=i&&n(i)?i:[]):u=i&&l(i)?i:{},r(h,{name:s,newValue:t(f,u,o)})):void 0!==o&&r(h,{name:s,newValue:o}));return h}},5458:(t,e,s)=>{s.d(e,{Z:()=>c});var i=s(1312),o=s.n(i);const n=new WeakMap,l=(0,s(1232).Z)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,((...t)=>{Array.from(document.querySelectorAll(".ql-container")).forEach((e=>{const s=n.get(e);s&&s.emitter&&s.emitter.handleDOM(...t)}))}))}));class r extends(o()){constructor(){super(),this.listeners={},this.on("error",l.error)}emit(...t){l.log.call(l,...t),super.emit(...t)}handleDOM(t,...e){(this.listeners[t.type]||[]).forEach((({node:s,handler:i})=>{(t.target===s||s.contains(t.target))&&i(t,...e)}))}listenDOM(t,e,s){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:s})}}r.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},r.sources={API:"api",SILENT:"silent",USER:"user"};const c=r},1232:(t,e,s)=>{s.d(e,{Z:()=>r});const i=["error","warn","log","info"];let o="warn";function n(t,...e){i.indexOf(t)<=i.indexOf(o)&&console[t](...e)}function l(t){return i.reduce(((e,s)=>(e[s]=n.bind(console,s,t),e)),{})}l.level=t=>{o=t},n.level=l.level;const r=l},7429:(t,e,s)=>{s.r(e),s.d(e,{BaseTooltip:()=>x,default:()=>L});var i=s(7396),o=s.n(i),n=s(5458);class l{constructor(t,e){this.quill=t,this.options=e,this.modules={}}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}l.DEFAULTS={modules:{}},l.themes={default:l};const r=l;var c,a=s(959);const u=t=>a.createElement("svg",t,c||(c=a.createElement("path",{className:"dropdown_svg__ql-stroke",d:"m7 11 2 2 2-2H7zM7 7l2-2 2 2H7z"})));let h=0;function d(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}const p=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");return e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item"),t.hasAttribute("value")&&e.setAttribute("data-value",t.getAttribute("value")),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=u,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${h}`,h+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const s=this.buildItem(e);t.appendChild(s),!0===e.selected&&this.selectItem(s)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t,e=!1){const s=this.container.querySelector(".ql-selected");t!==s&&(null!=s&&s.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},f=class extends p{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const s=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";s&&("line"===s.tagName?s.style.stroke=i:s.style.fill=i)}},b=class extends p{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const s=t||this.defaultItem;this.label.innerHTML!==s.innerHTML&&(this.label.innerHTML=s.innerHTML)}},m=[!1,"center","right","justify"],v=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],y=[!1,"serif","monospace"],g=["1","2","3",!1],q=["small",!1,"large","huge"];class L extends r{constructor(t,e){super(t,e);const s=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",s)};t.emitter.listenDOM("click",document.body,s)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((s=>{if(s.startsWith("ql-")&&(s=s.slice("ql-".length),null!=e[s]))if("direction"===s)t.innerHTML=e[s][""]+e[s].rtl;else if("string"==typeof e[s])t.innerHTML=e[s];else{const i=t.value||"";null!=i&&e[s][i]&&(t.innerHTML=e[s][i])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&A(t,m),new b(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const s=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&A(t,v,"background"===s?"#ffffff":"#000000"),new f(t,e[s])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?A(t,y):t.classList.contains("ql-header")?A(t,g):t.classList.contains("ql-size")&&A(t,q)),new p(t)})),this.quill.on(n.Z.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}L.DEFAULTS=o()(!0,{},r.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class x extends class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,s=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let n=0;if(o.right>i.right&&(n=i.right-o.right,this.root.style.left=`${e+n}px`),o.left<i.left&&(n=i.left-o.left,this.root.style.left=`${e+n}px`),o.bottom>i.bottom){const e=o.bottom-o.top,i=t.bottom-t.top+e;this.root.style.top=s-i+"px",this.root.classList.add("ql-flip")}return n}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide()}edit(t="link",e=null){this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){const{scrollTop:t}=this.quill.scrollingContainer;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,n.Z.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,n.Z.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),t,n.Z.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(s+1," ",n.Z.sources.USER),this.quill.setSelection(s+2,n.Z.sources.USER)}break}}this.textbox.value="",this.hide()}}function A(t,e,s=!1){e.forEach((e=>{const i=document.createElement("option");e===s?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)}))}}}]);